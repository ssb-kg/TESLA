!function(t,i){(t=t).g2=t.g2||{},t.g2.cpFullTabs=t.g2.cpFullTabs||{},t.g2.cpFullTabs.Component=function(){"use strict";return function(t){var i=window,s=i.jQuery,n=i.G2.util,e=i.G2.RESPONSIVE;function o(t,i){if(!(this instanceof o))return new o(t,i);var e={obj:t,props:{},cmBtnSwiper:".cp-full-tabs__nav",navWrap:".carousel-nav",navList:".carousel-nav-list",navItem:".carousel-nav__item",navControls:".carousel-nav-controls",globalText:{},isInArea:!1,customEvent:".Component"+(new Date).getTime()+Math.random(),viewType:null,scrollStart:null,resizeStart:null};this.opts=n.def(e,i||{}),(this.obj=s(this.opts.obj)).length&&this.init()}function a(t,i){var e={cmBtnSwiper:null,tabBtn:".tab-btn",cmTabContent:".cp-full-tabs__carousel-wrap, .cp-full-tabs__content",cmTabItem:".cp-full-tabs__carousel-item, .cp-full-tabs__item",carouselContainer:".swiper-container",carouselWrapper:".swiper-wrapper",carouselItem:".swiper-slide",carouselInstance:null,swiperInstance:null,carouselOpts:{autoHeight:!1,slidesPerView:"auto",slidesPerGroup:1},tabs:[],animating:!1,duration:200,classAttr:{active:"is-active"},autoPlay:!0,customEvent:".Component"+(new Date).getTime()+Math.random(),on:{start:null,complete:null}};this.opts=n.def(e,i||{}),this.obj=s(t),this.obj.length&&this.init()}function l(t,i){if(!(this instanceof l))return new l(t,i);var e={navControls:null,controlBtn:".btn-controls",isPlay:!0,classAttr:{play:"is-play",pause:"is-pause"},customEvent:".Controller"+(new Date).getTime()+Math.random(),globalText:{},on:{play:null,pause:null}};this.opts=n.def(e,i||{}),this.obj=s(t),this.obj.length&&this.init()}function r(t,i){if(!(this instanceof r))return new r(t,i);var e={lineInner:".line-inner",autoPlay:6,progress:null,remainFill:null,on:{complete:null}};this.opts=n.def(e,i||{}),this.obj=s(t),this.obj.length&&this.init()}return o.prototype={init:function(){this.setElements(),this.initOpts(),this.buildTimer(),this.buildControl(),this.buildTab(),this.resizeFunc(),this.bindEvents(!0)},setElements:function(){this.cmBtnSwiper=this.obj.find(this.opts.cmBtnSwiper),this.navWrap=this.cmBtnSwiper.find(this.opts.navWrap),this.navList=this.navWrap.find(this.opts.navList),this.navItem=this.navList.find(this.opts.navItem),this.navControls=this.cmBtnSwiper.find(this.opts.navControls)},initOpts:function(){var i=this.obj.data("global-text");if(i!==t)for(var n in i){var e=s.trim(i[n]);this.opts.globalText[n]=e.length?e:n}},changeEvents:function(t){var i=[],s=t.split(" ");for(var n in s)i.push(s[n]+this.opts.customEvent);return i.join(" ")},bindEvents:function(t){t?(s(i).on(this.changeEvents("scroll"),s.proxy(this.scrollFunc,this)),s(i).on(this.changeEvents("resize orientationchange"),s.proxy(this.resizeFunc,this))):(s(i).off(this.changeEvents("scroll")),s(i).off(this.changeEvents("resize orientationchange")))},setOpts:function(){var t=this.obj.offset(),i=this.obj.outerHeight(!0);this.opts.props.offset=t.top,this.opts.props.minOffset=Math.ceil(t.top-n.winSize().h,10),this.opts.props.maxOffset=Math.ceil(t.top+i,10)},scrollTimerControl:function(){var t=this.opts.props,n=s(i).scrollTop();t.minOffset<=n&&n<t.maxOffset?this.opts.isInArea||(this.opts.isInArea=!0,this.controller.isPlay=!1,this.timer.play(this.timer.activeIndex),this.tab.play(this.timer.activeIndex)):this.opts.isInArea&&(this.opts.isInArea=!1,this.controller.isPlay=!0,this.timer.pause(this.timer.activeIndex),this.tab.pause(this.timer.activeIndex))},isInActiveControl:function(){this.opts.isInArea||(this.controller.isPlay=!0,this.timer.pause(this.timer.activeIndex),this.tab.pause(this.timer.activeIndex))},scrollFunc:function(){this.winTop=s(i).scrollTop(),null==this.opts.scrollStart&&(this.opts.scrollStart=this.winTop,this.scrollAnimateFunc()),i.clearTimeout(this.scrollEndTimeout),this.scrollEndTimeout=i.setTimeout(s.proxy(this.scrollEndFunc,this),60)},scrollEndFunc:function(){this.opts.scrollStart=null,n.cancelAFrame.call(i,this.scrollRequestFrame)},scrollAnimateFunc:function(){this.setOpts(),this.scrollTimerControl(),this.scrollRequestFrame=n.requestAFrame.call(i,s.proxy(this.scrollAnimateFunc,this))},resizeFunc:function(){this.winWidth=n.winSize().w,null==this.opts.resizeStart&&(this.opts.resizeStart=this.winWidth,this.resizeAnimateFunc()),i.clearTimeout(this.resizeEndTime),this.resizeEndTime=i.setTimeout(s.proxy(this.resizeEndFunc,this),50)},resizeEndFunc:function(){this.opts.resizeStart=null,this.setOpts(),this.scrollFunc(),n.cancelAFrame.call(i,this.resizeRequestFrame)},resizeAnimateFunc:function(){this.setLayout(),this.resizeRequestFrame=n.requestAFrame.call(i,s.proxy(this.resizeAnimateFunc,this))},controlTooltip:function(){for(var t,i,s=this.obj.find(".cm-tooltip"),n=0,e=s.length;n<e;n++)t=n,i=void 0,(i=s.eq(t).data("ToolTip")).opts.isActive&&i.close()},setLayout:function(){if(this.winWidth<e.MOBILE.WIDTH){if(this.opts.viewType!==e.MOBILE.NAME){this.opts.viewType=e.MOBILE.NAME,this.controlTooltip();var t=null==this.timer.activeIndex?0:this.timer.activeIndex;this.tab.reset(t),this.timer.reset(t),this.timer.pause(t)}}else if("OTHER"!==this.opts.viewType){this.opts.viewType="OTHER",this.controlTooltip();t=null==this.timer.activeIndex?0:this.timer.activeIndex;this.tab.reset(t),this.controller.isPlay?this.tab.pause(t):this.tab.play(t),this.timer.reset(t),this.timer.play(t)}},buildTimer:function(){n.def(this,{timer:{instance:[],activeIndex:null,play:s.proxy((function(i){this.timer.instance[i]!=t&&(this.controller.isPlay||(this.controller.controlClass(!1),this.timer.instance[i].play()))}),this),pause:s.proxy((function(i){this.timer.instance[i]!=t&&(this.controller.controlClass(!0),this.timer.instance[i].pause())}),this),reset:s.proxy((function(i){this.timer.instance[i]!=t&&this.timer.instance[i].progress(0)}),this),build:s.proxy((function(i,n){this.timer.instance[i]==t?(this.timer.instance[i]=new r(this.navItem.eq(i),{autoPlay:n,on:{complete:s.proxy((function(){this.controlTooltip(),this.timer.reset(i);var t=i+1;t>=this.navItem.length&&(t=0),this.timer.activeIndex=t,this.tab.play(t)}),this)}}),this.timer.build(i)):(this.timer.activeIndex=i,this.opts.viewType!==e.MOBILE.NAME&&(this.timer.play(i),this.isInActiveControl()))}),this)}})},buildControl:function(){n.def(this,{controller:{instance:null,isPlay:!1,controlClass:s.proxy((function(t){null!=this.controller.instance&&this.controller.instance.controlClass(t)}),this),build:s.proxy((function(){this.navControls.length&&this.navItem.length>1?this.controller.instance=new l(this.obj,{navControls:this.opts.navControls,isPlay:this.controller.isPlay,globalText:this.opts.globalText,on:{play:s.proxy((function(){this.controller.isPlay=!0,this.timer.pause(this.timer.activeIndex),this.tab.pause(this.timer.activeIndex)}),this),pause:s.proxy((function(){this.controller.isPlay=!1,this.timer.play(this.timer.activeIndex),this.tab.play(this.timer.activeIndex)}),this)}}):this.navControls.hide()}),this)}}),this.controller.build()},buildTab:function(){var i=s.proxy((function(){this.timer.reset(this.timer.activeIndex)}),this),e=s.proxy((function(){if(null!=this.tab.instance){var i=this.tab.instance.opts.currentIndex,n=this.tab.instance.opts.tabs[i].tabVideo;null==n?this.timer.build(i,5):n.attr("data-video-loaded")==t?(n.on("videoLoaded",s.proxy((function(){this.timer.build(i,n.find("video")[0].duration)}),this)),this.tab.instance.opts.isPlay||(this.timer.activeIndex=i)):this.timer.build(i,n.find("video")[0].duration)}}),this);n.def(this,{tab:{instance:null,play:s.proxy((function(t){null!=this.tab.instance&&this.tab.instance.play(t)}),this),pause:s.proxy((function(t){null!=this.tab.instance&&this.tab.instance.pause(t)}),this),reset:s.proxy((function(t){null!=this.tab.instance&&this.tab.instance.reset(t)}),this),build:s.proxy((function(){this.navItem.length&&(this.tab.instance=new a(this.obj,{cmBtnSwiper:this.opts.cmBtnSwiper,on:{start:s.proxy((function(){i()}),this),complete:s.proxy((function(){e()}),this)}}))}),this)}}),this.tab.build(),e()},reInit:function(t){}},a.prototype={init:function(){this.setElements(),this.buildData(),this.initLayout(),this.buildCarousel(),this.bindEvents(!0)},setElements:function(){this.cmBtnSwiper=this.obj.find(this.opts.cmBtnSwiper),this.tabBtns=this.cmBtnSwiper.find(this.opts.tabBtn),this.cmTabContent=this.obj.find(this.opts.cmTabContent),this.cmTabItem=this.obj.find(this.opts.cmTabItem),this.carouselContainer=this.cmBtnSwiper.find(this.opts.carouselContainer),this.carouselWrapper=this.carouselContainer.find(this.opts.carouselWrapper),this.slides=this.carouselWrapper.find(this.opts.carouselItem)},buildData:function(){for(var t=0,i=this.tabBtns.length;t<i;t++){var s=this.tabBtns.eq(t),n=s.attr("data-tabtarget-name"),e=this.cmTabItem.filter('[data-tabtarget="'+n+'"]'),o=e.find(".video-container");this.opts.tabs[t]={tab:s,activeTab:s.closest("li"),tabCont:e,tabVideo:o.length?o:null}}},initLayout:function(){for(var t,i,n=this,e=this.tabBtns.filter((function(){s(this);return s(this).closest("li").hasClass(n.opts.classAttr.active)})),o=this.tabBtns.index(e),a=o<0?0:o,l=0,r=this.opts.tabs.length;l<r;l++)t=l,i=void 0,i=n.opts.tabs[t],a==t?(i.activeTab.addClass(n.opts.classAttr.active),i.tabCont.addClass(n.opts.classAttr.active).css("display",""),null!==i.tabVideo&&i.tabVideo.removeAttr("data-use-scrollmagic")):(i.activeTab.removeClass(n.opts.classAttr.active),i.tabCont.removeClass(n.opts.classAttr.active).hide(),null!==i.tabVideo&&i.tabVideo.attr("data-use-scrollmagic","false"));this.opts.currentIndex=a},buildCarousel:function(){null==this.opts.carouselInstance&&(this.opts.carouselOpts.breakpoints={768:{slidesPerView:this.slides.length,slidesPerGroup:this.slides.length}},this.opts.carouselInstance=new HiveSwiper(this.cmBtnSwiper,this.opts.carouselOpts),this.opts.swiperInstance=this.opts.carouselInstance.carousel)},carouselAutoFocus:function(t){null!=this.opts.carouselInstance&&this.opts.carouselInstance.controlAutoFocus(t)},slideTo:function(n,e){if(null!=this.opts.carouselInstance){var o=e;this.opts.swiperInstance.slideTo(n,e),e==t&&(o=this.opts.swiperInstance.params.speed),i.setTimeout(s.proxy((function(){this.carouselAutoFocus(!0)}),this),o)}},changeEvents:function(t){var i=[],s=t.split(" ");for(var n in s)i.push(s[n]+this.opts.customEvent);return i.join(" ")},bindEvents:function(t){t?(this.tabBtns.on(this.changeEvents("touchstart mousedown"),s.proxy(this.openerInFocus,this)),this.tabBtns.on(this.changeEvents("click"),s.proxy(this.cmTabBtnsClick,this))):(this.tabBtns.off(this.changeEvents("touchstart mousedown")),this.tabBtns.off(this.changeEvents("click")))},contAnimate:function(t,i){var e=this,o=this.cmTabContent,a=i||function(){};if(t)for(var l=0,r=0,h=o.length;r<h;r++)!function(t){var i=o.eq(t),r=i.find(e.opts.cmTabItem).filter("."+e.opts.classAttr.active);n.imgLoaded(i).done(s.proxy((function(){var t=n.getBoundingClientRect(i).height,o=n.getBoundingClientRect(r).height,c=s.proxy((function(){i.stop().css("height",""),++l==h&&a()}),e);t==o?c():TweenLite.to(i,.25,{height:o,onComplete:s.proxy((function(){c()}),e)})}),e))}(r);else{for(r=0,h=o.length;r<h;r++){var c=o.eq(r),u=c.find(e.opts.cmTabItem).filter("."+e.opts.classAttr.active);c.css("height",n.getBoundingClientRect(u).height)}a()}},openerInFocus:function(){this.carouselAutoFocus(!1)},cmTabBtnsClick:function(t){t.preventDefault();var n=this,e=s(t.currentTarget),o=this.tabBtns.index(e);this.slideTo(o);var a=this.opts.tabs,l=s(t.currentTarget),r=(o=this.tabBtns.index(l),s.proxy((function(t){TweenLite.fromTo(a[o].tabCont,this.opts.duration/1e3,{opacity:0},{opacity:1,display:"block",onComplete:s.proxy((function(){null!==t&&null!==a[t].tabVideo&&(a[t].tabVideo.attr("data-use-scrollmagic","false"),a[t].tabVideo.trigger("hiveVideoPause"),a[t].tabVideo.trigger("hiveVideoSetTime",0)),this.opts.autoPlay&&null!==a[o].tabVideo&&(a[o].tabVideo.attr("data-use-scrollmagic","true"),a[o].tabVideo.trigger("hiveVideoPlay"))}),this)}),i.setTimeout(s.proxy((function(){var t,e=s.proxy((function(){this.contAnimate(!0,s.proxy((function(){i.G2.page.stickyReposition(),this.outCallback("complete")}),this))}),this);if(this.opts.animating=!1,null!==a[o].tabVideo){var l=a[o].tabVideo.not('[data-video-loaded="true"]'),r=0;if(l.length){for(var h=0,c=l.length;h<c;h++)t=h,l.eq(t).on("videoLoaded",s.proxy((function(){++r==c&&e()}),n));this.opts.autoPlay||e()}else e()}else e()}),this),this.opts.duration)}),this));if(this.opts.currentIndex!==o&&!this.opts.animating){if(this.opts.animating=!0,this.contAnimate(!1),this.outCallback("start"),a[o].activeTab.addClass(this.opts.classAttr.active),a[o].tabCont.addClass(this.opts.classAttr.active),null!==this.opts.currentIndex){var h=this.opts.currentIndex;a[this.opts.currentIndex].activeTab.removeClass(this.opts.classAttr.active),a[this.opts.currentIndex].tabCont.removeClass(this.opts.classAttr.active),TweenLite.fromTo(a[this.opts.currentIndex].tabCont,this.opts.duration/1e3,{opacity:1,display:"block"},{opacity:0,display:"none"}),i.setTimeout((function(){r(h)}),this.opts.duration)}else r(null);this.opts.currentIndex=o}},play:function(t){if(this.opts.autoPlay=!0,t==this.opts.currentIndex){var i=this.opts.tabs;null!==i[t].tabVideo&&(i[t].tabVideo.attr("data-use-scrollmagic","true"),i[t].tabVideo.trigger("hiveVideoPlay"))}else this.tabBtns.eq(t).triggerHandler("click")},pause:function(t){this.opts.autoPlay=!1;var i=this.opts.tabs;null!==i[t].tabVideo&&(i[t].tabVideo.attr("data-use-scrollmagic","false"),i[t].tabVideo.trigger("hiveVideoPause"))},reset:function(t){var i=this.opts.tabs;null!==i[t].tabVideo&&i[t].tabVideo.trigger("hiveVideoSetTime",0)},outCallback:function(t){var i=this.opts.on[t];null!=i&&i()}},l.prototype={init:function(){this.setElements(),this.initLayout(),this.bindEvents(!0)},setElements:function(){this.navControls=this.obj.find(this.opts.navControls),this.controlBtn=this.navControls.find(this.opts.controlBtn)},initLayout:function(){this.controlClass(this.opts.isPlay)},changeEvents:function(t){var i=[],s=t.split(" ");for(var n in s)i.push(s[n]+this.opts.customEvent);return i.join(" ")},bindEvents:function(t){t?this.controlBtn.on(this.changeEvents("click"),s.proxy(this.controlClickFunc,this)):this.controlBtn.off(this.changeEvents("click"))},controlClickFunc:function(t){t.preventDefault(),this.opts.isPlay=!this.opts.isPlay,this.opts.isPlay?this.outCallback("play"):this.outCallback("pause"),this.controlClass(this.opts.isPlay)},controlClass:function(t){var i=this.opts.globalText,s=this.opts.classAttr;if(t){if(this.controlBtn.hasClass(s.play))return;this.controlBtn.addClass(s.play).removeClass(s.pause),this.controlBtn.find(".blind").text(i.Play)}else{if(this.controlBtn.hasClass(s.pause))return;this.controlBtn.addClass(s.pause).removeClass(s.play),this.controlBtn.find(".blind").text(i.Pause)}this.opts.isPlay=t},outCallback:function(t){var i=this.opts.on[t];null!=i&&i()}},r.prototype={init:function(){this.setElements(),this.initOpts(),this.initLayout()},setElements:function(){this.lineInner=this.obj.find(this.opts.lineInner)},initOpts:function(){this.opts.autoPlay=1e3*this.opts.autoPlay,this.opts.remainFill=this.opts.autoPlay},initLayout:function(){this.lineInner.css("width",0)},play:function(){this.lineInner.stop().animate({width:"100%"},{duration:this.opts.remainFill,easing:"linear",step:s.proxy((function(t){this.opts.progress=t}),this),complete:s.proxy((function(){this.outCallback("complete")}),this)})},pause:function(){this.stop(this.opts.progress)},stop:function(t){var i=(100-t)/100;this.lineInner.stop().css("width",t+"%"),this.opts.remainFill=this.opts.autoPlay*i,this.opts.progress=t},progress:function(i){i==t&&(i=0),i<0?i=0:i>=1&&(i=1),this.stop(100*i)},outCallback:function(t){var i=this.opts.on[t];null!=i&&i()}},o}()}()}(this),$((function(){!function(){"use strict";!function(t){var i=window,s=i.jQuery,n=i.G2.util;function e(t){var i={obj:".cp-full-tabs"};this.opts=n.def(i,t||{}),(this.obj=s(this.opts.obj)).length&&this.init()}e.prototype={init:function(){this.callComponent()},callComponent:function(){for(var t=0,s=this.obj.length;t<s;t++)new i.g2.cpFullTabs.Component(this.obj.eq(t))}},new e}()}()}));