!function(t,s){(t=t).g2=t.g2||{},t.g2.cpFeatureCarousel=t.g2.cpFeatureCarousel||{},t.g2.cpFeatureCarousel.Component=function(){"use strict";return function(t){var s=window,e=s.jQuery,i=s.G2.util,n=s.G2.RESPONSIVE;function o(t,s){if(!(this instanceof o))return new o(t,s);var n={obj:t,carouselInstance:null,carouselOpts:{initialSlide:0},bgWrap:".slide-bg",carouselWrap:".cp-feature-carousel__wrap",carouselContainer:".swiper-container",carouselWrapper:".swiper-wrapper",carouselItem:".swiper-slide",carouselImg:".slide-image",foldTxtWrap:".fold-text-wrap",foldInner:".fold-text-inner",carouselWrapperTransitionClass:"is-transition",swiperInstance:null,currentIndex:null,shareObj:".js-share",layerInstance:null,layerObj:"#cp-feature-carousel",layerObjActiveClass:"is-active",classAttr:{opened:"is-opened",hasDescription:"has-description"},globalText:{},customEvent:".Component"+(new Date).getTime()+Math.random(),viewType:null,resizeStart:null};this.opts=i.def(n,s||{}),(this.obj=e(this.opts.obj)).length&&this.init()}function r(t,s){var n={obj:t,foldInner:".fold-text-inner",foldInnerBtn:".fold-text-btn",foldDescWrap:".fold-desc-wrap",foldDescInner:".fold-desc-inner",classAttr:{opened:"is-opened"},ariaAttr:{expanded:"aria-expanded"},isFoldActive:!1,customEvent:".Component"+(new Date).getTime()+Math.random(),resizeStart:null,on:{active:null,deactive:null}};this.opts=i.def(n,s||{}),(this.obj=e(this.opts.obj)).length&&this.init()}return o.prototype={init:function(){this.setElements(),this.initOpts(),this.buildFoldTxt(),this.buildShare(),this.buildCarousel(),this.controlBg(),this.controlDescription(),this.resizeFunc(),this.bindEvents(!0),this.bindCallBackEvents()},setElements:function(){this.carouselWrap=this.obj.find(this.opts.carouselWrap),this.bgWrap=this.obj.find(this.opts.bgWrap),this.carouselContainer=this.carouselWrap.find(this.opts.carouselContainer),this.carouselWrapper=this.carouselContainer.find(this.opts.carouselWrapper),this.slides=this.carouselWrapper.find(this.opts.carouselItem),this.foldTxtWrap=this.slides.find(this.opts.foldTxtWrap),this.shareObj=this.obj.find(this.opts.shareObj),this.layerObj=e(this.opts.layerObj)},initOpts:function(){var s=this.obj.data("global-text");if(s!==t)for(var i in s){var n=e.trim(s[i]);this.opts.globalText[i]=n.length?n:i}},buildLayer:function(){this.opts.layerInstance=new HiveLayer(this.layerObj),this.opts.layerInstance.closerObj.on(this.changeEvents("click"),e.proxy((function(s){var i=e(s.currentTarget),n=i.data("swiper-index")!==t?i.data("swiper-index"):null;null!==n&&this.slideToLoop(n,0)}),this))},buildFoldTxt:function(){i.def(this,{foldtxt:{instance:[],kill:e.proxy((function(){for(var t=0,s=this.foldtxt.instance.length;t<s;t++)this.foldtxt.instance[t].kill();this.foldtxt.instance=[]}),this),build:e.proxy((function(){for(var t=e.proxy((function(t,s){var i=new r(t,{on:{active:e.proxy((function(){var t=200;this.updateAutoHeight(t)}),this),deactive:e.proxy((function(){var t=200;this.updateAutoHeight(t)}),this)}});this.foldtxt.instance.push(i)}),this),s=0,i=this.foldTxtWrap.length;s<i;s++){t(this.foldTxtWrap.eq(s),s)}}),this)}}),this.foldtxt.build()},buildCarousel:function(){null==this.opts.carouselInstance&&(this.obj.data("global-text",this.opts.globalText),this.opts.carouselInstance=new HiveSwiper(this.obj,this.opts.carouselOpts),this.opts.currentIndex=this.opts.carouselOpts.initialSlide,this.opts.swiperInstance=this.opts.carouselInstance.carousel,this.opts.swiperInstance.on("transitionStart",e.proxy((function(){var t=this.opts.swiperInstance.realIndex;this.opts.currentIndex!=t&&(this.share.all.sync(t),this.carouselWrapper.addClass(this.opts.carouselWrapperTransitionClass))}),this)),this.opts.swiperInstance.on("transitionEnd",e.proxy((function(){var t=this.opts.swiperInstance.realIndex;this.opts.currentIndex!=t&&(this.controlBg(),this.controlDescription(),this.carouselWrapper.removeClass(this.opts.carouselWrapperTransitionClass),this.opts.currentIndex=t)}),this)))},updateAutoHeight:function(t){null!=this.opts.carouselInstance&&this.opts.swiperInstance.updateAutoHeight(t)},slideToLoop:function(t,s){null!=this.opts.carouselInstance&&this.opts.carouselInstance.slideToLoop(t,s)},stopFunction:function(){null!=this.opts.carouselInstance&&this.opts.carouselInstance.stopFunction()},playFunction:function(){null!=this.opts.carouselInstance&&this.opts.carouselInstance.playFunction()},destroyCarousel:function(){null!=this.opts.carouselInstance&&(this.opts.swiperInstance.off("transitionStart transitionEnd"),this.opts.carouselInstance.destroy(!0,!0),this.opts.swiperInstance=null,this.opts.carouselInstance=null)},controlBg:function(){if(null!=this.opts.swiperInstance){var t=this.opts.swiperInstance.realIndex,s=this.slides.eq(t).find(this.opts.carouselImg).css("background-image");this.bgWrap.css("background-image",s)}},controlDescription:function(){if(null!=this.opts.swiperInstance){var t=this.opts.swiperInstance.realIndex;this.slides.eq(t).find(this.opts.foldInner).length?this.carouselContainer.addClass(this.opts.classAttr.hasDescription):this.carouselContainer.removeClass(this.opts.classAttr.hasDescription)}},changeEvents:function(t){var s=[],e=t.split(" ");for(var i in e)s.push(e[i]+this.opts.customEvent);return s.join(" ")},bindEvents:function(t){t?e(s).on(this.changeEvents("resize orientationchange"),e.proxy(this.resizeFunc,this)):e(s).off(this.changeEvents("resize orientationchange"))},resizeFunc:function(){this.winWidth=i.winSize().w,null==this.opts.resizeStart&&(this.opts.resizeStart=this.winWidth,this.resizeAnimateFunc()),s.clearTimeout(this.resizeEndTime),this.resizeEndTime=s.setTimeout(e.proxy(this.resizeEndFunc,this),150)},resizeEndFunc:function(){this.opts.resizeStart=null,i.cancelAFrame.call(s,this.resizeRequestFrame)},resizeAnimateFunc:function(){this.setLayout(),this.resizeRequestFrame=i.requestAFrame.call(s,e.proxy(this.resizeAnimateFunc,this))},setLayout:function(){this.winWidth<n.MOBILE.WIDTH?this.opts.viewType!==n.MOBILE.NAME&&(this.opts.viewType=n.MOBILE.NAME,this.share.all.sync(this.opts.currentIndex)):"OTHER"!==this.opts.viewType&&(this.opts.viewType="OTHER",this.share.all.sync(this.opts.currentIndex))},bindCallBackEvents:function(){this.layerObj.on(this.changeEvents("layerOpenBefore"),e.proxy(this.openBeforeFunc,this)),this.layerObj.on(this.changeEvents("layerCloseBefore"),e.proxy(this.closeBeforeFunc,this)),this.layerObj.on(this.changeEvents("layerCloseAfter"),e.proxy(this.closeAfterFunc,this))},openBeforeFunc:function(t,i){i&&(null==i.opts.openerTarget?this.openerTarget=null:this.openerTarget=e(i.opts.openerTarget[0])),this.stopFunction(),s.setTimeout(e.proxy((function(){this.layerObj.addClass(this.opts.layerObjActiveClass)}),this),30)},closeBeforeFunc:function(){this.playFunction()},closeAfterFunc:function(){this.layerObj.removeClass(this.opts.layerObjActiveClass)},controlSwiping:function(t){this.carouselContainer.toggleClass("swiper-no-swiping",!t)},buildShare:function(){i.def(this,{share:{downloadurls:{},active:e.proxy((function(){this.share.all.open(),this.stopFunction(),this.controlSwiping(!1)}),this),deactive:e.proxy((function(){this.share.all.close(),this.playFunction(),this.controlSwiping(!0)}),this),close:e.proxy((function(){this.share.deactive()}),this),closeAll:e.proxy((function(){this.share.all.close(),this.controlSwiping(!0)}),this)}}),this.buildShareData()},buildShareData:function(){for(var t=e.proxy((function(t){var s={instance:null,isActive:!1,open:e.proxy((function(){null!=s.instance&&(s.isActive||(s.isActive=!0,s.instance.open()))}),this),close:e.proxy((function(){null!=s.instance&&s.isActive&&(s.isActive=!1,s.instance.close())}),this)};return null==s.instance&&t.length&&(s.instance=t.data("ShareLayer"),s.instance.opts.on={active:e.proxy((function(){s.isActive=!0,this.share.active(this.opts.currentIndex)}),this),deactive:e.proxy((function(){s.isActive=!1,this.share.deactive(this.opts.currentIndex)}),this)}),s}),this),s=0,n=this.slides.length;s<n;s++){var o=this.slides.eq(s).find(this.opts.carouselImg);this.share.downloadurls[s]={PC:o.eq(0).attr("data-download-url"),MO:o.eq(1).attr("data-download-url")}}var r=this.shareObj;i.def(this,{share:{all:t(r)}}),this.share.all.sync=e.proxy((function(t){var s=r.find('[data-icon="svg-download"]').closest(".share-item-link"),e="mobile"==this.opts.viewType?"MO":"PC";s.attr("href",this.share.downloadurls[t][e])}),this)},reInit:function(t){}},r.prototype={init:function(){this.setElements(),this.resizeFunc(),this.bindEvents(!0)},setElements:function(){this.foldInner=this.obj.find(this.opts.foldInner),this.foldInnerBtn=this.obj.find(this.opts.foldInnerBtn),this.foldDescWrap=this.obj.find(this.opts.foldDescWrap),this.foldDescInner=this.foldDescWrap.find(this.opts.foldDescInner)},changeEvents:function(t){var s=[],e=t.split(" ");for(var i in e)s.push(e[i]+this.opts.customEvent);return s.join(" ")},bindEvents:function(t){t?(e(s).on(this.changeEvents("resize orientationchange"),e.proxy(this.resizeFunc,this)),this.foldInnerBtn.on(this.changeEvents("click"),e.proxy(this.foldInnerBtnClick,this))):(e(s).off(this.changeEvents("resize orientationchange")),this.foldInnerBtn.off(this.changeEvents("click")))},resizeFunc:function(){this.winWidth=i.winSize().w,null==this.opts.resizeStart&&(this.opts.resizeStart=this.winWidth,this.resizeAnimateFunc()),s.clearTimeout(this.resizeEndTime),this.resizeEndTime=s.setTimeout(e.proxy(this.resizeEndFunc,this),150)},resizeEndFunc:function(){this.opts.resizeStart=null,i.cancelAFrame.call(s,this.resizeRequestFrame)},resizeAnimateFunc:function(){this.setLayout(),this.resizeRequestFrame=i.requestAFrame.call(s,e.proxy(this.resizeAnimateFunc,this))},setLayout:function(){this.opts.isFoldActive&&this.foldLayout(!0,0)},foldInnerBtnClick:function(t){t.preventDefault();var s=e(t.currentTarget);this.opts.isFoldActive=!this.opts.isFoldActive,this.foldView(s),this.foldLayout(this.opts.isFoldActive)},foldView:function(t){this.foldInner.toggleClass(this.opts.classAttr.opened,this.opts.isFoldActive),this.foldInner.hasClass(this.opts.classAttr.opened)?t.attr(this.opts.ariaAttr.expanded,"true"):t.attr(this.opts.ariaAttr.expanded,"false")},foldLayout:function(t,i){var n=function(t,s){var i=s.css("transition-property"),n=s.css("transition-duration"),o=s.css("transition-delay"),r=i.split(",").map((function(t){return e.trim(t)})),a=n.split(",").map((function(t){return 1e3*parseFloat(e.trim(t))})),l=o.split(",").map((function(t){return 1e3*parseFloat(e.trim(t))})),c=e.inArray(t,r);return a[c]+l[c]},o=this.foldDescInner.outerHeight(!0);if(t){this.foldDescWrap.css("height",o);var r=n("height",this.foldDescWrap);s.setTimeout(e.proxy((function(){this.outCallback("active")}),this),r)}else{this.foldDescWrap.css("height","");r=n("height",this.foldDescWrap);s.setTimeout(e.proxy((function(){this.outCallback("deactive")}),this),r)}},kill:function(){this.bindEvents(!1),this.opts.isFoldActive=!1,this.foldInner.removeClass(this.opts.classAttr.opened),this.foldInnerBtn.attr(this.opts.ariaAttr.expanded,"false"),this.foldDescWrap.css("height","")},outCallback:function(t){var s=this.opts.on[t];null!=s&&s(this)}},o}()}()}(this),$((function(){!function(){"use strict";!function(t){var s=window,e=s.jQuery,i=s.G2.util;function n(t){var s={obj:".cp-feature-carousel"};this.opts=i.def(s,t||{}),(this.obj=e(this.opts.obj)).length&&this.init()}n.prototype={init:function(){this.callComponent()},callComponent:function(){for(var t=0,e=this.obj.length;t<e;t++)new s.g2.cpFeatureCarousel.Component(this.obj.eq(t))}},new n}()}()})),function(t){$((function(){var s=[];$('div[data-check="share-CI1A"]').each((function(){s.push($(this).data("component-id"))}));for(var e=0;e<s.length;e++){var i=s[e],n=parseUri(window.location.href);if(n.queryKey.sns&&i==n.queryKey.sns.substring(4)){$("."+i).attr("id",i),document.getElementById(i).scrollIntoView();var o=n.queryKey.slide;$("."+i+" .swiper-pagination").find("button:eq("+o+")").click()}$("."+i+" .share-item-link").on("click",(function(s){if("svg-download"!=$(this).find(".js-svg-icon").data("icon")){s.preventDefault();var e=$(this).parents(".cm-share").siblings(".cp-feature-carousel__wrap").find(".swiper-pagination-bullet-active").data("bullet-index"),i=window.location.href,n="CI1A"+$(this).parents(".cp-feature-carousel__inner").data("component-id"),o=t.updateURLParameter(i,"sns",n),r=e;o=t.updateURLParameter(o,"slide",r),history.pushState("","",o);var a=$(this).find("span.blind").text();a=a.toLowerCase();var l=$(this).parents(".cm-share").siblings(".cp-feature-carousel__wrap").find(".swiper-slide-active input[name=carousel-title]").val();sns_share(a,l)}})),$("."+i+" .btn-close").on("click",(function(){var s=t.updateURLParameter(window.location.href,"sns","");s=t.updateURLParameter(s,"slide",""),history.pushState("","",s)}))}}))}(window.extension=window.extension||{});